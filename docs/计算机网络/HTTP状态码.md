## HTTP状态码分类

HTTP状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字没有分类的作用。HTTP状态码共分为5种类型：

| 分类 | 分类描述                                       |
| :--- | :--------------------------------------------- |
| 1**  | 信息，服务器收到请求，需要请求者继续执行操作   |
| 2**  | 成功，操作被成功接收并处理                     |
| 3**  | 重定向，需要进一步的操作以完成请求             |
| 4**  | 客户端错误，请求包含语法错误或无法完成请求     |
| 5**  | 服务器错误，服务器在处理请求的过程中发生了错误 |

HTTP状态码列表:

| 状态码 | 状态码英文名称                  |                           中文描述                           |
| :----- | :------------------------------ | :----------------------------------------------------------: |
| 100    | Continue                        | 继续。[客户端](http://www.dreamdu.com/webbuild/client_vs_server/)应继续其请求 |
| 101    | Switching Protocols             | 切换协议。服务器根据客户端的请求切换协议。只能切换到更高级的协议，例如，切换到HTTP的新版本协议 |
|        |                                 |                                                              |
| 200    | OK                              |               请求成功。一般用于GET与POST请求                |
| 201    | Created                         |               已创建。成功请求并创建了新的资源               |
| 202    | Accepted                        |              已接受。已经接受请求，但未处理完成              |
| 203    | Non-Authoritative Information   | 非授权信息。请求成功。但返回的meta信息不在原始的服务器，而是一个副本 |
| 204    | No Content                      | 无内容。服务器成功处理，但未返回内容。在未更新网页的情况下，可确保浏览器继续显示当前文档 |
| 205    | Reset Content                   | 重置内容。服务器处理成功，用户终端（例如：浏览器）应重置文档视图。可通过此返回码清除浏览器的表单域 |
| 206    | Partial Content                 |            部分内容。服务器成功处理了部分GET请求             |
|        |                                 |                                                              |
| 300    | Multiple Choices                | 多种选择。请求的资源可包括多个位置，相应可返回一个资源特征与地址的列表用于用户终端（例如：浏览器）选择 |
| 301    | Moved Permanently               | 永久移动。请求的资源已被永久的移动到新URI，返回信息会包括新的URI，浏览器会自动定向到新URI。今后任何新的请求都应使用新的URI代替 |
| 302    | Found                           | 临时移动。与301类似。但资源只是临时被移动。客户端应继续使用原有URI |
| 303    | See Other                       |        查看其它地址。与301类似。使用GET和POST请求查看        |
| 304    | Not Modified                    | 未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源 |
| 305    | Use Proxy                       |            使用代理。所请求的资源必须通过代理访问            |
| 306    | Unused                          |                    已经被废弃的HTTP状态码                    |
| 307    | Temporary Redirect              |           临时重定向。与302类似。使用GET请求重定向           |
|        |                                 |                                                              |
| 400    | Bad Request                     |             客户端请求的语法错误，服务器无法理解             |
| 401    | Unauthorized                    |                    请求要求用户的身份认证                    |
| 402    | Payment Required                |                        保留，将来使用                        |
| 403    | Forbidden                       |        服务器理解请求客户端的请求，但是拒绝执行此请求        |
| 404    | Not Found                       | 服务器无法根据客户端的请求找到资源（网页）。通过此代码，网站设计人员可设置"您所请求的资源无法找到"的个性页面 |
| 405    | Method Not Allowed              |                   客户端请求中的方法被禁止                   |
| 406    | Not Acceptable                  |          服务器无法根据客户端请求的内容特性完成请求          |
| 407    | Proxy Authentication Required   | 请求要求代理的身份认证，与401类似，但请求者应当使用代理进行授权 |
| 408    | Request Time-out                |           服务器等待客户端发送的请求时间过长，超时           |
| 409    | Conflict                        | 服务器完成客户端的 PUT 请求时可能返回此代码，服务器处理请求时发生了冲突 |
| 410    | Gone                            | 客户端请求的资源已经不存在。410不同于404，如果资源以前有现在被永久删除了可使用410代码，网站设计人员可通过301代码指定资源的新位置 |
| 411    | Length Required                 |    服务器无法处理客户端发送的不带Content-Length的请求信息    |
| 412    | Precondition Failed             |                 客户端请求信息的先决条件错误                 |
| 413    | Request Entity Too Large        | 由于请求的实体过大，服务器无法处理，因此拒绝请求。为防止客户端的连续请求，服务器可能会关闭连接。如果只是服务器暂时无法处理，则会包含一个Retry-After的响应信息 |
| 414    | Request-URI Too Large           |        请求的URI过长（URI通常为网址），服务器无法处理        |
| 415    | Unsupported Media Type          |               服务器无法处理请求附带的媒体格式               |
| 416    | Requested range not satisfiable |                     客户端请求的范围无效                     |
| 417    | Expectation Failed              |               服务器无法满足Expect的请求头信息               |
|        |                                 |                                                              |
| 500    | Internal Server Error           |                 服务器内部错误，无法完成请求                 |
| 501    | Not Implemented                 |             服务器不支持请求的功能，无法完成请求             |
| 502    | Bad Gateway                     | 作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应 |
| 503    | Service Unavailable             | 由于超载或系统维护，服务器暂时的无法处理客户端的请求。延时的长度可包含在服务器的Retry-After头信息中 |
| 504    | Gateway Time-out                |      充当网关或代理的服务器，未及时从远端服务器获取请求      |
| 505    | HTTP Version not supported      |        服务器不支持请求的HTTP协议的版本，无法完成处理        |

## 常见code码及排查方案

### 304

未修改。所请求的资源未修改，服务器返回此状态码时，不会返回任何资源。客户端通常会缓存访问过的资源，通过提供一个头信息指出客户端希望只返回在指定日期之后修改的资源

### 499

可以看到，499对应的是 “client has closed connection”。这很有可能是因为服务器端处理的时间过长，客户端“不耐烦”了。

当客户端网络中断请求时，nginx 服务器中断其对后端服务器的请求，并立即记录 499 日志

Nginx 499错误的原因及解决方法

打开Nginx的access.log发现在最后一次的提交是出现了HTTP1.1 499 0 -这样的错误，在百度搜索nginx 499错误，结果都是说客户端主动断开了连接。

但经过我的测试这显然不是客户端的问题，因为使用端口+IP直接访问后端服务器不存在此问题，后来测试nginx发现如果两次提交post过快就会出现499的情况，看来是nginx认为是不安全的连接，主动拒绝了客户端的连接.

### 500

​	一般是由于程序bug引起的，查看nginx日志及程序记录日志

### 502

​		一般来说Nginx 502 Bad Gateway和php-fpm.conf的设置有关

​		NGINX 502 Bad Gateway错误是FastCGI有问题,造成nginx 502错误的可能性比较多。将网上找到的一些和502 Bad Gateway错误有关的问题和排查方法列一下,先从FastCGI配置入手:

1. 后端服务器异常，直接返回，可能的原因：PHP进程满，不接受请求

2. 响应超时，返回错误码
3. 502问题很多时候会反映在服务器某一部分系统性能上，因此如果通过日志解决不了问题时，通过观察系统性能是一个解决502问题的思路

具体排查

	1. **查看FastCGI进程是否已经启动**NGINX 502错误的含义是sock、端口没被监听造成的。我们先检查fastcgi是否在运行
	2. **检查系统Fastcgi进程运行情况**除了第一种情况,fastcgi进程数不够用、php执行时间长、或者是php-cgi进程死掉也可能造成nginx的502错误运行以下命令判断是否接近FastCGI进程,如果fastcgi进程数接近配置文件中设置的数值,表明worker进程数设置太少
	3. **FastCGI执行时间过长**
	4. **头部太大**
	5. **https转发配置错误**

### 504

一般来说与nginx.conf的设置有关

504错误一般是由于请求超时造成的,nginx请求9000端口 或者sock文件.然后等待进程的响应,如果进程没有响应,则nginx 报504错误.